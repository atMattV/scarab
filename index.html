<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCARAB - System for Crafting Agile Roadmaps And Backlogs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@700;800&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- PDF.js library for PDF text extraction -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <!-- JSZip for creating zip files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- FileSaver.js for saving files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;
        function readFileAsDataURL(file) {
        return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = (error) => reject(error);
        reader.readAsDataURL(file);
        });
    }
    </script>
	<link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Fullscreen Modal -->
    <div id="fullscreenModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden p-4">
        <div class="card p-0 w-full max-w-6xl h-full max-h-[90vh] flex flex-col">
            <!-- Modal Header -->
            <div id="modalHeader" class="flex justify-between items-center p-4 border-b border-slate-700 flex-shrink-0">
                <h3 id="modalTitle" class="text-lg font-bold title-font text-glow">Expanded View</h3>
                <div class="flex items-center gap-4">
                    <button id="modalDownloadButton" class="header-btn p-2 rounded-lg" title="Download as .txt">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
                    </button>
                    <button id="modalCloseButton" class="header-btn p-2 rounded-lg" title="Close">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <!-- Modal Content -->
            <div id="modalContent" class="flex-grow p-4 overflow-y-auto prose prose-invert max-w-none text-sm">
                <!-- Content will be injected here -->
            </div>
            <!-- Thoth Chat Input (Initially Hidden) -->
            <div id="modalChatContainer" class="p-4 border-t border-slate-700 flex-shrink-0 hidden">
                <div class="flex gap-2">
                    <input type="text" id="modalThothInput" class="input-field block w-full px-4 py-2 rounded-full text-sm shadow-sm placeholder-slate-500 focus:outline-none mono-font" placeholder="Continue the conversation...">
                    <button id="modalThothSendButton" class="btn btn-primary text-white font-bold py-2 px-4 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="apiKeyModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="card p-8 rounded-xl w-full max-w-md relative">
            <button id="closeModalButton" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h2 class="text-2xl font-bold mb-4 title-font text-glow">API Key</h2>
            <p class="mb-4 text-sm">Please enter your Gemini API key. This is stored only in your browser and is required to run the analysis.</p>
            <label for="apiKeyInput" class="block text-lg font-medium mb-2">Gemini API Key</label>
            <input type="password" id="apiKeyInput" name="apiKeyInput" class="input-field block w-full px-3 py-2 rounded-md text-sm shadow-sm placeholder-slate-500 focus:outline-none" placeholder="Enter your API key here">
            <div class="mt-6 text-right">
                <button id="saveApiKeyButton" class="btn btn-primary text-white font-bold py-2 px-6 rounded-lg">Save</button>
            </div>
        </div>
    </div>

<!-- Project Goal Modal -->
<div id="projectGoalModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="card p-8 rounded-xl w-full max-w-lg relative">
        <h2 class="text-2xl font-bold mb-4 title-font text-glow">Define Project Goal</h2>
        <p class="mb-4 text-sm">Please provide the primary, high-level goal for this project. This will guide the Agents in creating more relevant artifacts. (e.g., "Reduce customer churn by improving the checkout process," or "Launch a new feature to allow users to create public profiles.")</p>
        <label for="projectGoalInput" class="block text-lg font-medium mb-2">Primary Goal</label>
        <textarea id="projectGoalInput" class="input-field block w-full px-3 py-2 rounded-md text-sm shadow-sm placeholder-slate-500 focus:outline-none" rows="4" placeholder="What is the main objective?"></textarea>
        <div class="mt-6 text-right">
            <button id="saveProjectGoalButton" class="btn btn-primary text-white font-bold py-2 px-6 rounded-lg">Continue to Forge</button>
        </div>
    </div>
</div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="card p-8 rounded-xl w-full max-w-2xl relative max-h-[80vh] flex flex-col">
            <button id="closeFaqModalButton" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h2 class="text-2xl font-bold mb-4 title-font text-glow">Frequently Asked Questions</h2>
            <div class="space-y-4 overflow-y-auto pr-4">
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        What is SCARAB?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <p class="mt-2 text-sm">SCARAB (System for Crafting Agile Roadmaps And Backlogs) is a multi-agent system designed to accelerate the initial phases of agile software development. It takes raw documents (like PRDs, business cases, PDFs, or even **images** of whiteboards) and transforms them into a structured set of agile artifacts, including requirements, user stories, size estimates, and BDD test cases.</p>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        How does each agent contribute?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <ul class="mt-2 text-sm space-y-2 list-disc list-inside">
                        <li><strong>CQChat:</strong> Acts as your Pocket Solution Architect. It uses **semantic search** to find the most relevant information from your documents and the agents' analyses to answer your questions accurately.</li>
                        <li><strong>RAG Indexer:</strong> It reads all uploaded documents, describes any images, and breaks all information down into small, meaningful chunks. It then creates **vector embeddings** for each chunk, enabling powerful semantic search.</li>
                        <li><strong>Requirements Extractor:</strong> It examines the document chunks to extract key functional and non-functional requirements. It also identifies potential gaps, ambiguities, or questions that need clarification.</li>
                        <li><strong>User Stories Builder:</strong> It takes the requirements from Ma'at and structures them into a formal agile backlog of Epics and User Stories, complete with personas and justifications.</li>
                        <li><strong>User Stories Expander:</strong> It elaborates on each user story, adding detailed implementation tasks and Gherkin-style acceptance criteria to make them "Definition of Ready".</li>
                        <li><strong>Effort Estimator:</strong> It assesses the complexity of the expanded stories and assigns a T-shirt size estimate (XS, S, M, L, XL) to each one, providing a justification for its reasoning.</li>
                        <li><strong>Test Automator:</strong> It generates a set of BDD (Behavior-Driven Development) test cases in Gherkin format based on the acceptance criteria, preparing the groundwork for automated testing.</li>
                        <li><strong>Artifacts Generator:</strong> This final agent gathers all the generated artifacts and packages them into a downloadable .zip file containing several organized CSV files for easy import into tools like Jira or Azure DevOps.</li>
                    </ul>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        How does the semantic search work?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <p class="mt-2 text-sm">Instead of just matching keywords, SCARAB uses a technique called Retrieval Augmented Generation (RAG). When you index documents, the **Seshat** agent creates a numerical representation (an "embedding") of the meaning of each text chunk. When you or an agent asks a question, that question is also converted into an embedding. The system then performs a similarity search to find the document chunks whose meanings are closest to your query, providing much more relevant and context-aware information to the agents.</p>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        Can the app read responses aloud?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <p class="mt-2 text-sm">Yes. Every response from Thoth will have a small speaker icon. Clicking this button will use Text-to-Speech technology to read the agent's message out loud.</p>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        What are the different execution modes?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                     <p class="mt-2 text-sm space-y-2">
                         <strong>Run Full Analysis:</strong> This is the "fire and forget" mode. It runs the entire agent pipeline from start to finish without any user intervention. It's the fastest way to get from documents to a complete set of downloadable artifacts.
                         <br><br>
                         <strong>HTL Analysis:</strong> This is the guided, Human-in-the-Loop mode. It runs one agent at a time, pausing after each step. This allows you to review the output, provide feedback or corrections in a text box, and then approve the result before proceeding to the next agent.
                         <br><br>
                         <strong>Manual Agents:</strong> This mode gives you granular control. You can select specific agents using the checkboxes on their cards and run only that part of the pipeline. This is useful if you only need to generate requirements or want to re-run a specific step. It requires documents to be indexed first.
                     </p>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        What is "UltraThink"?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <p class="mt-2 text-sm">The <strong>UltraThink</strong> toggle allocates a larger processing budget to the AI models. When enabled, the agents engage in more detailed internal reasoning, planning, and web research before generating their final output. This can lead to higher quality, more nuanced results, especially for complex documents, but may take slightly longer to run.</p>
                </details>
                <details class="group">
                    <summary class="text-lg font-semibold cursor-pointer list-none flex justify-between items-center">
                        Is my API key secure?
                        <svg class="w-5 h-5 transition-transform transform group-open:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <p class="mt-2 text-sm">Yes. Your Gemini API key is stored exclusively in your browser's local storage. It is never sent to any server other than the official Google AI API endpoints required for the analysis to run. It is not logged or stored by SCARAB itself.</p>
                </details>
            </div>
        </div>
    </div>

    <!-- Error Popup -->
    <div id="errorPopup" class="fixed top-5 right-5 bg-gradient-to-br from-red-900 to-black p-4 rounded-lg shadow-lg text-white text-sm z-50 hidden opacity-0 transition-opacity duration-300">
        API Key is required. Please set it in the API settings.
    </div>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-screen-2xl">

        <!-- Header -->
        <header class="mb-8 flex justify-between items-center">
            <div class="flex items-center">
                 <svg class="logo" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 10L12 3L19 10L12 21L5 10Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                    <path d="M12 3V9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M12 21V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M5 10H19" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M8.5 10L12 12.5L15.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div>
                    <h1 class="text-5xl font-extrabold title-font text-glow">SCARAB</h1>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button id="themeToggle" class="header-btn flex flex-col items-center p-2 rounded-lg transition-colors w-20" title="Toggle Theme">
                    <svg id="themeIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <span class="text-xs mt-1">Theme</span>
                </button>
                <button id="openFaqButton" class="header-btn flex flex-col items-center p-2 rounded-lg transition-colors w-20" title="FAQ">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span class="text-xs mt-1">FAQ</span>
                </button>
                <button id="openModalButton" class="header-btn flex flex-col items-center p-2 rounded-lg transition-colors w-20" title="API Key Settings">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.602l-4.135 4.135a1.5 1.5 0 0 1-2.121 0l-.707-.707a1.5 1.5 0 0 1 0-2.121l4.135-4.135A6 6 0 0 1 21.75 8.25z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.5 9.75a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg>
                    <span class="text-xs mt-1">API</span>
                </button>
            </div>
        </header>

        <!-- Inputs Card -->
        <div class="card p-6 mb-8 relative overflow-hidden">
            <div class="h-2 absolute top-0 left-0 right-0 bg-gradient-to-r from-green-900 via-green-700 to-green-900" style="--tw-gradient-from: var(--bright-accent-green);"></div>
            <div class="pt-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-1">
                        <h2 class="text-xl font-bold title-font text-glow">Upload Documents</h2>
                    </div>
                    <div class="md:col-span-2">
                        <h2 class="text-xl font-bold title-font text-glow text-center">Define Context</h2>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-start mt-4">
                    <!-- File Upload Column -->
                    <div class="md:col-span-1">
                        <div id="fileUploadArea" class="file-upload-area p-6 text-center rounded-lg cursor-pointer h-full flex flex-col justify-center">
                            <input type="file" id="fileInput" multiple class="hidden" accept=".txt,.md,.html,.json,.csv,.pdf,.png,.jpg,.jpeg,.webp,.mp3,.wav,audio/*,image/*">
                            <svg class="mx-auto h-10 w-10 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>
                            <p class="mt-3 text-sm"><span class="font-semibold text-blue-400">Click to upload</span> or drag & drop</p>
                        </div>
                        <div id="fileList" class="mt-4 space-y-2"></div>
                    </div>
                    <!-- Context Column -->
                    <div class="md:col-span-2">
        <div>
            <h3 class="text-lg font-semibold mb-2 title-font text-glow">Project Name</h3>
            <input type="text" id="projectName" class="input-field block w-full px-3 py-2 rounded-md text-sm shadow-sm placeholder-slate-500 focus:outline-none" placeholder="e.g., Q3_Feature_Launch">
        </div>
    <div class="mt-6">
        <h3 class="text-lg font-semibold mb-2 title-font text-glow">Additional Context <small class="font-normal text-sm">(optional)</small></h3>
        <textarea id="additionalContext" class="input-field block w-full px-3 py-2 rounded-md text-sm shadow-sm placeholder-slate-500 focus:outline-none" rows="4" placeholder="Provide any high-level context, goals, or constraints for the entire project..."></textarea>
    </div>
</div>
                    </div>
                </div>
            </div>
             <div class="mt-8 text-center">
<button id="startIndexButton" class="btn btn-primary text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center mx-auto">
        Index Documents
</button>
            </div>
        </div>

        <!-- Thoth Chatbot -->
        <div class="card p-6 mb-8 flex flex-col">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
    <svg class="w-8 h-8 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
       <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
    </svg>
    <h2 class="text-2xl font-bold title-font text-glow">Contextual Query Chat</h2>
</div>
                <button class="expand-btn -mt-4" data-content-source="thothChatHistory" data-agent-name="CQC" data-content-type="Chat_History">
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                </button>
            </div>
            <div id="thothChatHistory" class="flex-grow overflow-y-auto pr-2 pt-4 space-y-4 mono-font">
                <div class="flex justify-start">
                    <div class="chat-bubble chat-bubble-agent">
                        <p>Welcome to the Contextual Query Chat. I can answer questions about your indexed documents or the generated artifacts. Please index your documents to begin.</p>
                    </div>
                </div>
            </div>
            <div>
    <!-- This is the new container for showing attached files -->
    <div class="mt-4">
    <div id="thothAttachmentsContainer" class="mb-2 flex flex-wrap gap-2"></div>

    <div class="mt-1 flex gap-2">
        <input type="file" id="thothFileInput" multiple class="hidden" accept=".txt,.md,.pdf,.png,.jpg,.jpeg">

        <button id="thothAttachmentButton" class="btn btn-secondary text-white p-3 rounded-full flex items-center justify-center transition-colors duration-300" disabled title="Attach Files to this Message">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path></svg>
        </button>

        <input type="text" id="thothInput" class="input-field block w-full px-4 py-2 rounded-full text-sm shadow-sm placeholder-slate-500 focus:outline-none mono-font" placeholder="Ask about documents or artifacts..." disabled>
        <button id="thothSendButton" class="btn btn-primary text-white font-bold py-2 px-4 rounded-full flex items-center justify-center" disabled>
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"></path></svg>
        </button>
    </div>
</div>
</div>
        </div>
       
        <!-- Seshat Card -->
        <div id="seshat-container" class="mb-8">
            <div id="card-seshat" class="card glow-default">
                <details id="agentCard-seshat" class="agent-card-details">
                    <summary class="agent-card-summary">
                        <div class="flex items-center gap-3">
                            <svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
                            <h3 class="text-lg font-bold"><span class="text-glow">RAG Indexer</span></h3>
                        </div>
                        <svg class="chevron text-slate-500 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </summary>
                    <div class="agent-card-content prose prose-invert max-w-none text-sm">
                        <div id="indexerOutput" class="p-4"><p>Document chunks will appear here.</p></div>
                    </div>
                </details>
            </div>
        </div>

        <!-- Agent Forge -->
        <div>
            <div id="forgeContent">
    <h2 class="text-3xl font-bold title-font text-glow mb-8 text-center">Artifacts Generation</h2>
    <!-- UltraThink Toggle -->
    <div class="flex justify-center items-center gap-4 mb-6">
        <span class="font-semibold text-lg title-font text-glow">UltraThink</span>
        <label class="toggle-switch">
            <input type="checkbox" id="ultraThinkToggle" checked>
            <span class="slider"></span>
        </label>
    </div>
    <div class="max-w-3xl mx-auto relative mb-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button id="runFullAnalysisButton" class="btn btn-forge btn-full" disabled>
                <svg class="w-7 h-7 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
                <span class="text-lg font-bold">Full Analysis</span>
            </button>
            <button id="runStepAnalysisButton" class="btn btn-forge btn-step" disabled>
                <svg class="w-7 h-7 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" /></svg>
                <span class="text-lg font-bold">HTL Analysis</span>
            </button>
            <button id="runManualAgentsButton" class="btn btn-forge btn-manual-run" disabled>
                <svg class="w-7 h-7 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0h9.75m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" /></svg>
                <span class="text-lg font-bold">Manual Agents</span>
            </button>
        </div>
<button id="stopAnalysisButton" class="btn btn-danger text-white font-bold py-3 px-8 rounded-lg hidden mt-4 flex items-center justify-center gap-2 mx-auto">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
    </svg>
    Stop Analysis
</button>
    </div>
</div>

    <!-- Main Grid Container for all Agent Cards -->
    <div id="agentGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8 items-stretch mt-8">
		<div id="card-maat" class="card col-span-1 md:col-span-2 xl:col-span-4 glow-default">
			<div class="agent-card-header p-4 border-b border-slate-700 relative">
				<div class="flex justify-between items-center">
					<div class="flex items-center gap-3">
						<input type="checkbox" id="checkbox-maat" class="agent-checkbox h-5 w-5 rounded bg-slate-700 border-slate-500 text-blue-500 focus:ring-blue-600">
						<svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
						<h3 class="text-lg font-bold"><span class="text-glow">Requirements Extractor</span></h3>
					</div>
					<div id="controls-maat" class="flex items-center gap-2">
						<button class="feedback-btn hidden text-xs bg-slate-600 hover:bg-slate-500 text-white font-semibold py-1 px-3 rounded">Add Feedback</button>
						<button class="retry-btn hidden text-xs bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded">Retry</button>
					</div>
				</div>
			</div>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4">
				<div class="relative">
					<div class="flex justify-between items-center mb-2">
						<h4 class="text-xs font-semibold uppercase">Thought Stream</h4>
						<button class="expand-btn" data-content-source="thought-stream-maat" data-agent-name="Requirements Extractor" data-content-type="Thought_Stream">
							<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
						</button>
					</div>
					<div id="thought-stream-maat" class="thought-stream-box !h-48">
					   <p class="p-4">Awaiting thought stream...</p>
					</div>
					<div id="web-research-maat" class="relative hidden mt-4">
						<div class="flex justify-between items-center mb-2">
							<h4 class="text-xs font-semibold uppercase flex items-center gap-2 text-amber-400">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3" /></svg>
								Web Research Findings
							</h4>
							<button class="expand-btn" data-content-source="research-content-maat" data-agent-name="Requirements Extractor" data-content-type="Web_Research">
								<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
							</button>
						</div>
						<div id="research-content-maat" class="output-box p-2 rounded-md h-48 text-xs prose prose-invert max-w-none"></div>
					</div>
				</div>
				<div class="relative">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">Requirements</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="extractorOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="extractorOutput" data-agent-name="Requirements Extractor" data-content-type="Requirements"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="extractorOutput" class="output-box p-2 rounded-md h-48 text-xs prose prose-invert max-w-none"></div>
				</div>
				<div class="relative">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">Gaps & Questions</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="gapsOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="gapsOutput" data-agent-name="Requirements Extractor" data-content-type="Gaps_and_Questions"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="gapsOutput" class="output-box p-2 rounded-md h-48 text-xs prose prose-invert max-w-none"></div>
				</div>
			</div>
			<div id="refinement-chat-maat" class="p-4 border-t border-slate-700 hidden">
				<div id="refinement-history-maat" class="text-xs space-y-2 mb-2 max-h-48 overflow-y-auto pr-2">
				</div>
				<div class="flex items-center gap-2">
					<input type="text" id="refinement-input-maat" class="input-field !text-xs !py-1 flex-grow" placeholder="e.g., Make the first requirement more concise...">
<button class="btn btn-secondary text-white font-bold py-2 px-4 rounded-lg refinement-send-btn" data-agent="maat">Refine</button>				</div>
				<div class="text-right mt-3">
<button class="btn btn-success text-white font-bold py-2 px-4 rounded-lg approve-and-continue-btn" data-agent="maat">Approve & Continue</button>				</div>
			</div>
		</div>
		<div id="card-ptah" class="card col-span-1 glow-default">
			<div class="agent-card-header p-4 border-b border-slate-700 relative">
				<div class="flex justify-between items-center">
					<div class="flex items-center gap-3">
						<input type="checkbox" id="checkbox-ptah" class="agent-checkbox h-5 w-5 rounded bg-slate-700 border-slate-500 text-blue-500 focus:ring-blue-600">
						<svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" /></svg>
						<h3 class="text-lg font-bold"><span class="text-glow">User Stories Builder</span></h3>
					</div>
					<div id="controls-ptah" class="flex items-center gap-2">
						<button class="feedback-btn hidden text-xs bg-slate-600 hover:bg-slate-500 text-white font-semibold py-1 px-3 rounded">Add Feedback</button>
						<button class="retry-btn hidden text-xs bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded">Retry</button>
					</div>
				</div>
			</div>
			<div class="relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase">Thought Stream</h4>
				<button class="expand-btn absolute top-3 right-3" data-content-source="thought-stream-ptah" data-agent-name="User Stories Builder" data-content-type="Thought_Stream">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="thought-stream-ptah" class="thought-stream-box !h-24 !p-0 !border-none !bg-transparent">
					<p class="p-4">Awaiting thought stream...</p>
				</div>
			</div>
			<div id="web-research-ptah" class="web-research-box hidden relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase flex items-center gap-2 text-amber-400">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3" /></svg>
					Web Research Findings
				</h4>
				<button class="expand-btn absolute top-3 right-3" data-content-source="research-content-ptah" data-agent-name="User Stories Builder" data-content-type="Web_Research">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="research-content-ptah" class="output-box p-2 rounded-md h-24 text-xs prose prose-invert max-w-none"></div>
			</div>
			<details id="agentCard-ptah" class="agent-card-details">
				<summary class="agent-card-summary">
					<span class="text-sm">View Output</span>
					<svg class="chevron text-slate-500 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
				</summary>
				<div class="agent-card-content text-sm">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">User Stories</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="analyzerOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="analyzerOutput" data-agent-name="User Stories Builder" data-content-type="User_Stories"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="analyzerOutput" class="output-box p-2 rounded-md h-64 text-xs prose prose-invert max-w-none"></div>
				</div>
			</details>
			<div id="refinement-chat-ptah" class="p-4 border-t border-slate-700 hidden">
				<div id="refinement-history-ptah" class="text-xs space-y-2 mb-2 max-h-48 overflow-y-auto pr-2"></div>
				<div class="flex items-center gap-2">
					<input type="text" id="refinement-input-ptah" class="input-field !text-xs !py-1 flex-grow" placeholder="e.g., Combine the first two stories...">
<button class="btn btn-secondary text-white font-bold py-2 px-4 rounded-lg refinement-send-btn" data-agent="ptah">Refine</button>				</div>
				<div class="text-right mt-3">
<button class="btn btn-success text-white font-bold py-2 px-4 rounded-lg approve-and-continue-btn" data-agent="ptah">Approve & Continue</button>				</div>
			</div>
		</div>
		<div id="card-osiris" class="card col-span-1 glow-default">
			<div class="agent-card-header p-4 border-b border-slate-700 relative">
				<div class="flex justify-between items-center">
					<div class="flex items-center gap-3">
						<input type="checkbox" id="checkbox-osiris" class="agent-checkbox h-5 w-5 rounded bg-slate-700 border-slate-500 text-blue-500 focus:ring-blue-600">
						<svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>
						<h3 class="text-lg font-bold"><span class="text-glow">User Stories Expander</span></h3>
					</div>
					<div id="controls-osiris" class="flex items-center gap-2">
						<button class="feedback-btn hidden text-xs bg-slate-600 hover:bg-slate-500 text-white font-semibold py-1 px-3 rounded">Add Feedback</button>
						<button class="retry-btn hidden text-xs bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded">Retry</button>
					</div>
				</div>
			</div>
			<div class="relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase">Thought Stream</h4>
				<button class="expand-btn absolute top-3 right-3" data-content-source="thought-stream-osiris" data-agent-name="User Stories Expander" data-content-type="Thought_Stream">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="thought-stream-osiris" class="thought-stream-box !h-24 !p-0 !border-none !bg-transparent">
					<p class="p-4">Awaiting thought stream...</p>
				</div>
			</div>
			<div id="web-research-osiris" class="web-research-box hidden relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase flex items-center gap-2 text-amber-400">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3" /></svg>
					Web Research Findings
				</h4>
				<button class="expand-btn absolute top-3 right-3" data-content-source="research-content-osiris" data-agent-name="User Stories Expander" data-content-type="Web_Research">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="research-content-osiris" class="output-box p-2 rounded-md h-24 text-xs prose prose-invert max-w-none"></div>
			</div>
			<details id="agentCard-osiris" class="agent-card-details">
				<summary class="agent-card-summary">
					<span class="text-sm">View Output</span>
					<svg class="chevron text-slate-500 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
				</summary>
				<div class="agent-card-content text-sm">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">Expanded Stories</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="expanderOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="expanderOutput" data-agent-name="User Stories Expander" data-content-type="Expanded_Stories"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="expanderOutput" class="output-box p-2 rounded-md h-64 text-xs prose prose-invert max-w-none"></div>
				</div>
			</details>
			<div id="refinement-chat-osiris" class="p-4 border-t border-slate-700 hidden">
				<div id="refinement-history-osiris" class="text-xs space-y-2 mb-2 max-h-48 overflow-y-auto pr-2"></div>
				<div class="flex items-center gap-2">
					<input type="text" id="refinement-input-osiris" class="input-field !text-xs !py-1 flex-grow" placeholder="e.g., Add more detail to the ACs...">
<button class="btn btn-secondary text-white font-bold py-2 px-4 rounded-lg refinement-send-btn" data-agent="osiris">Refine</button>				</div>
				<div class="text-right mt-3">
<button class="btn btn-success text-white font-bold py-2 px-4 rounded-lg approve-and-continue-btn" data-agent="osiris">Approve & Continue</button>				</div>
			</div>
		</div>
		<div id="card-bastet" class="card col-span-1 glow-default">
			<div class="agent-card-header p-4 border-b border-slate-700 relative">
				<div class="flex justify-between items-center">
					<div class="flex items-center gap-3">
						<input type="checkbox" id="checkbox-bastet" class="agent-checkbox h-5 w-5 rounded bg-slate-700 border-slate-500 text-blue-500 focus:ring-blue-600">
						<svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.153.24c-1.119 0-2.235-.34-3.218-.995a5.988 5.988 0 01-2.153-.24c-.482-.174-.711-.703-.59-1.202L18.75 4.971zm-16.5.52c-1.01.143-2.01.317-3 .52m3-.52l-2.62 10.726c-.122.499.106 1.028.589 1.202a5.989 5.989 0 002.153.24c1.119 0 2.235-.34 3.218-.995a5.989 5.989 0 002.153-.24c.482-.174.711-.703.59-1.202L5.25 4.971z" /></svg>
						<h3 class="text-lg font-bold"><span class="text-glow">Effort Estimator</span></h3>
					</div>
					<div id="controls-bastet" class="flex items-center gap-2">
						<button class="feedback-btn hidden text-xs bg-slate-600 hover:bg-slate-500 text-white font-semibold py-1 px-3 rounded">Add Feedback</button>
						<button class="retry-btn hidden text-xs bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded">Retry</button>
					</div>
				</div>
			</div>
			<div class="relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase">Thought Stream</h4>
					<button class="expand-btn absolute top-3 right-3" data-content-source="thought-stream-bastet" data-agent-name="Effort Estimator" data-content-type="Thought_Stream">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="thought-stream-bastet" class="thought-stream-box !h-24 !p-0 !border-none !bg-transparent">
					<p class="p-4">Awaiting thought stream...</p>
				</div>
			</div>
			<details id="agentCard-bastet" class="agent-card-details">
				<summary class="agent-card-summary">
					<span class="text-sm">View Output</span>
					<svg class="chevron text-slate-500 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
				</summary>
				<div class="agent-card-content text-sm">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">Size Estimates</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="estimatorOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="estimatorOutput" data-agent-name="Effort Estimator" data-content-type="Estimates"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="estimatorOutput" class="output-box p-2 rounded-md h-64 text-xs prose prose-invert max-w-none"></div>
				</div>
			</details>
			<div id="refinement-chat-bastet" class="p-4 border-t border-slate-700 hidden">
				<div id="refinement-history-bastet" class="text-xs space-y-2 mb-2 max-h-48 overflow-y-auto pr-2"></div>
				<div class="flex items-center gap-2">
					<input type="text" id="refinement-input-bastet" class="input-field !text-xs !py-1 flex-grow" placeholder="e.g., The first estimate is too high...">
<button class="btn btn-secondary text-white font-bold py-2 px-4 rounded-lg refinement-send-btn" data-agent="bastet">Refine</button>				</div>
				<div class="text-right mt-3">
<button class="btn btn-success text-white font-bold py-2 px-4 rounded-lg approve-and-continue-btn" data-agent="bastet">Approve & Continue</button>				</div>
			</div>
		</div>
		<div id="card-anubis" class="card col-span-1 glow-default">
			<div class="agent-card-header p-4 border-b border-slate-700 relative">
				<div class="flex justify-between items-center">
					<div class="flex items-center gap-3">
						<input type="checkbox" id="checkbox-anubis" class="agent-checkbox h-5 w-5 rounded bg-slate-700 border-slate-500 text-blue-500 focus:ring-blue-600">
						<svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
						<h3 class="text-lg font-bold"><span class="text-glow">Test Cases Builder</span></h3>
					</div>
					<div id="controls-anubis" class="flex items-center gap-2">
						<button class="feedback-btn hidden text-xs bg-slate-600 hover:bg-slate-500 text-white font-semibold py-1 px-3 rounded">Add Feedback</button>
						<button class="retry-btn hidden text-xs bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-1 px-3 rounded">Retry</button>
					</div>
				</div>
			</div>
			<div class="relative p-4 border-b border-slate-800">
				<h4 class="text-xs font-semibold mb-2 uppercase">Thought Stream</h4>
					<button class="expand-btn absolute top-3 right-3" data-content-source="thought-stream-anubis" data-agent-name="Test Cases Builder" data-content-type="Thought_Stream">
					<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
				</button>
				<div id="thought-stream-anubis" class="thought-stream-box !h-24 !p-0 !border-none !bg-transparent">
					<p class="p-4">Awaiting thought stream...</p>
				</div>
			</div>
			<details id="agentCard-anubis" class="agent-card-details">
				<summary class="agent-card-summary">
					<span class="text-sm">View Output</span>
					<svg class="chevron text-slate-500 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
				</summary>
				<div class="agent-card-content text-sm">
					<div class="flex justify-between items-center mb-2">
						<h4 class="font-semibold">Test Cases</h4>
						<div class="flex gap-2">
							<button class="copy-btn" data-target="automatorOutput"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></button>
							<button class="expand-btn" data-content-source="automatorOutput" data-agent-name="Test Cases Builder" data-content-type="Test_Cases"><svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg></button>
						</div>
					</div>
					<div id="automatorOutput" class="output-box p-2 rounded-md h-64 text-xs prose prose-invert max-w-none"></div>
				</div>
			</details>
			<div id="refinement-chat-anubis" class="p-4 border-t border-slate-700 hidden">
				<div id="refinement-history-anubis" class="text-xs space-y-2 mb-2 max-h-48 overflow-y-auto pr-2"></div>
				<div class="flex items-center gap-2">
					<input type="text" id="refinement-input-anubis" class="input-field !text-xs !py-1 flex-grow" placeholder="e.g., Add a test case for invalid login...">
<button class="btn btn-secondary text-white font-bold py-2 px-4 rounded-lg refinement-send-btn" data-agent="anubis">Refine</button>				</div>
				<div class="text-right mt-3">
<button class="btn btn-success text-white font-bold py-2 px-4 rounded-lg approve-and-continue-btn" data-agent="anubis">Approve & Continue</button>				</div>
			</div>
		</div>
	</div>
         <!-- Agent Card: Compiler -->
        <div id="card-horus" class="card col-span-1 glow-default">
            <div id="agentCard-horus" class="agent-card-details">
                <div class="agent-card-summary !cursor-default">
                    <div class="flex items-center gap-3">
                        <svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5" /></svg>
                        <h3 class="text-lg font-bold"><span class="text-glow">Artifacts Compiler</span></h3>
                    </div>
                </div>
                <div class="relative p-4 border-b border-slate-800">
                    <h4 class="text-xs font-semibold mb-2 uppercase">Thought Stream</h4>
                    <button class="expand-btn absolute top-3 right-3" data-content-source="thought-stream-horus" data-agent-name="Artifacts Compiler" data-content-type="Thought_Stream">
                        <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                    </button>
                    <div id="thought-stream-horus" class="thought-stream-box !h-24 !p-0 !border-none !bg-transparent">
                        <p class="p-4">Awaiting thought stream...</p>
                    </div>
                </div>
                <div class="agent-card-content flex flex-col justify-center items-center text-center">
                    <h4 class="font-semibold text-xl mb-2 title-font text-glow">Final Build</h4>
                    <p class="mb-4 text-sm">Once the pipeline is complete, you can download the build artifacts.</p>
                    <div id="downloadContainer">
                        <p class="text-xs">Awaiting pipeline completion...</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Timer Card -->
        <div class="card flex flex-col timer-card">
             <div class="p-4 border-b border-slate-700">
                <div class="flex items-center gap-3">
                    <svg class="w-6 h-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <h3 class="text-lg font-bold"><span class="text-glow">Analysis Timer</span></h3>
                </div>
            </div>
            <div class="agent-card-content flex flex-col justify-center items-center text-center flex-grow">
                <p class="text-sm font-semibold mb-3 text-glow">The current project has been running for...</p>
                <div id="timerDisplay" class="timer-display">
                    <span class="timer-digit">0</span>
                    <span class="timer-digit">0</span>
                    <span class="timer-digit">0</span>
                    <span class="timer-digit">0</span>
                </div>
            </div>
        </div>
    </div>
</div>
        </div>
    </div>
	<script src="script.js" defer></script>
</body>
</html>
